<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="970px" preserveAspectRatio="none" style="width:1396px;height:970px;" version="1.1" viewBox="0 0 1396 970" width="1396px" zoomAndPan="magnify"><defs><filter height="300%" id="fo7ip4k5lfpf1" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="599.5" cy="53.2898" fill="#000000" filter="url(#fo7ip4k5lfpf1)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#fo7ip4k5lfpf1)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="189" x="505" y="83.2898"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="169" x="515" y="106.1179">read config file &amp; check syntax</text><rect fill="#FEFECE" filter="url(#fo7ip4k5lfpf1)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="134" x="532.5" y="139.6339"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="114" x="542.5" y="162.462">set up epoll instance</text><rect fill="#FEFECE" filter="url(#fo7ip4k5lfpf1)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="226" x="486.5" y="195.978"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="206" x="496.5" y="218.8061">setup sockets &amp; add to epoll instance</text><rect fill="#FEFECE" filter="url(#fo7ip4k5lfpf1)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="160" x="519.5" y="252.3222"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="140" x="529.5" y="275.1502">instantiate virtualServers</text><rect fill="#FEFECE" filter="url(#fo7ip4k5lfpf1)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="210" x="494.5" y="308.6663"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="190" x="504.5" y="331.4944">initiate infinite loop with epoll_wait</text><polygon fill="#FEFECE" filter="url(#fo7ip4k5lfpf1)" points="79,452.9923,204,452.9923,216,464.9923,204,476.9923,79,476.9923,67,464.9923,79,452.9923" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="17" x="145.5" y="488.7512">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="125" x="79" y="469.2602">fd is one of the sockets?</text><rect fill="#FEFECE" filter="url(#fo7ip4k5lfpf1)" height="52.6882" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="54" y="511.9742"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="126" x="64" y="534.8022">establish connection &amp;</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="155" x="64" y="551.1464">add new fd to epoll instance</text><polygon fill="#FEFECE" filter="url(#fo7ip4k5lfpf1)" points="510,452.9923,644,452.9923,656,464.9923,644,476.9923,510,476.9923,498,464.9923,510,452.9923" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="17" x="581" y="488.7512">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="134" x="510" y="469.2602">header is not fully parsed</text><polygon fill="#FEFECE" filter="url(#fo7ip4k5lfpf1)" points="474,511.9742,680,511.9742,692,523.9742,680,535.9742,474,535.9742,462,523.9742,474,511.9742" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="206" x="474" y="528.2421">this connection Request is instantiated?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="17" x="445" y="520.7512">yes</text><path d="M239,550.2932 L239,577.9992 A0,0 0 0 0 239,577.9992 L352,577.9992 A0,0 0 0 0 352,577.9992 L352,568.2932 L372,564.1462 L352,560.2932 L352,560.2932 L342,550.2932 L239,550.2932 A0,0 0 0 0 239,550.2932 " fill="#FBFB77" filter="url(#fo7ip4k5lfpf1)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M342,550.2932 L342,560.2932 L352,560.2932 L342,550.2932 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="245" y="569.1902">recv called here</text><rect fill="#FEFECE" filter="url(#fo7ip4k5lfpf1)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="160" x="372" y="545.9742"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="140" x="382" y="568.8022">continue to parse header</text><rect fill="#FEFECE" filter="url(#fo7ip4k5lfpf1)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="217" x="593.5" y="545.9742"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="197" x="603.5" y="568.8022">instantiate Request object &amp; track it</text><polygon fill="#FEFECE" filter="url(#fo7ip4k5lfpf1)" points="577,588.3183,589,600.3183,577,612.3183,565,600.3183,577,588.3183" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#fo7ip4k5lfpf1)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="202" x="820.5" y="492.7377"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="182" x="830.5" y="515.5658">dispatch request to virtualServer</text><path d="M411.5,860.8165 L411.5,888.5225 A0,0 0 0 0 411.5,888.5225 L528.5,888.5225 A0,0 0 0 0 528.5,888.5225 L528.5,878.8165 L548.5,874.6695 L528.5,870.8165 L528.5,870.8165 L518.5,860.8165 L411.5,860.8165 A0,0 0 0 0 411.5,860.8165 " fill="#FBFB77" filter="url(#fo7ip4k5lfpf1)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M518.5,860.8165 L518.5,870.8165 L528.5,870.8165 L518.5,860.8165 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="96" x="417.5" y="879.7135">send called here</text><rect fill="#FEFECE" filter="url(#fo7ip4k5lfpf1)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="548.5" y="856.4974"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="82" x="558.5" y="879.3255">send response</text><polygon fill="#FEFECE" filter="url(#fo7ip4k5lfpf1)" points="527,807.0065,672,807.0065,684,819.0065,672,831.0065,527,831.0065,515,819.0065,527,807.0065" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="17" x="603.5" y="842.7654">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="145" x="527" y="823.2745">is there a response be sent?</text><polygon fill="#FEFECE" filter="url(#fo7ip4k5lfpf1)" points="599.5,912.8416,611.5,924.8416,599.5,936.8416,587.5,924.8416,599.5,912.8416" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#fo7ip4k5lfpf1)" points="587.5,365.0104,611.5,365.0104,623.5,377.0104,611.5,389.0104,587.5,389.0104,575.5,377.0104,587.5,365.0104" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="158" x="603.5" y="400.7693">iterate through all flagged fds</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="22" x="588.5" y="381.2784">true</text><ellipse cx="34" cy="423.0104" fill="#FFFFFF" filter="url(#fo7ip4k5lfpf1)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 2.5;" x1="27.8128" x2="40.1872" y1="416.8232" y2="429.1976"/><line style="stroke: #000000; stroke-width: 2.5;" x1="40.1872" x2="27.8128" y1="416.8232" y2="429.1976"/><path d="M1050.5,568.4009 L1050.5,596.1069 A0,0 0 0 0 1050.5,596.1069 L1163.5,596.1069 A0,0 0 0 0 1163.5,596.1069 L1163.5,586.4009 L1183.5,582.2539 L1163.5,578.4009 L1163.5,578.4009 L1153.5,568.4009 L1050.5,568.4009 A0,0 0 0 0 1050.5,568.4009 " fill="#FBFB77" filter="url(#fo7ip4k5lfpf1)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1153.5,568.4009 L1153.5,578.4009 L1163.5,578.4009 L1153.5,568.4009 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="92" x="1056.5" y="587.2979">recv called here</text><rect fill="#FEFECE" filter="url(#fo7ip4k5lfpf1)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="80" x="1183.5" y="564.0819"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="60" x="1193.5" y="586.9099">parseBody</text><rect fill="#FEFECE" filter="url(#fo7ip4k5lfpf1)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="1160" y="632.3183"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="107" x="1170" y="655.1464">construct response</text><rect fill="#FEFECE" filter="url(#fo7ip4k5lfpf1)" height="36.3441" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="303" x="1072" y="688.6624"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="283" x="1082" y="711.4905">signal WebServer that response is ready to be sent</text><ellipse cx="1223.5" cy="756.0065" fill="#FFFFFF" filter="url(#fo7ip4k5lfpf1)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="1223.5" cy="756.0065" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="599.5" x2="599.5" y1="63.2898" y2="83.2898"/><polygon fill="#A80036" points="595.5,73.2898,599.5,83.2898,603.5,73.2898,599.5,77.2898" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="599.5" x2="599.5" y1="119.6339" y2="139.6339"/><polygon fill="#A80036" points="595.5,129.6339,599.5,139.6339,603.5,129.6339,599.5,133.6339" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="599.5" x2="599.5" y1="175.978" y2="195.978"/><polygon fill="#A80036" points="595.5,185.978,599.5,195.978,603.5,185.978,599.5,189.978" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="599.5" x2="599.5" y1="232.3222" y2="252.3222"/><polygon fill="#A80036" points="595.5,242.3222,599.5,252.3222,603.5,242.3222,599.5,246.3222" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="599.5" x2="599.5" y1="288.6663" y2="308.6663"/><polygon fill="#A80036" points="595.5,298.6663,599.5,308.6663,603.5,298.6663,599.5,302.6663" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="462" x2="452" y1="523.9742" y2="523.9742"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="452" x2="452" y1="523.9742" y2="545.9742"/><polygon fill="#A80036" points="448,535.9742,452,545.9742,456,535.9742,452,539.9742" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="692" x2="702" y1="523.9742" y2="523.9742"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="702" x2="702" y1="523.9742" y2="545.9742"/><polygon fill="#A80036" points="698,535.9742,702,545.9742,706,535.9742,702,539.9742" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="452" x2="452" y1="582.3183" y2="600.3183"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="452" x2="565" y1="600.3183" y2="600.3183"/><polygon fill="#A80036" points="555,596.3183,565,600.3183,555,604.3183,559,600.3183" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="702" x2="702" y1="582.3183" y2="600.3183"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="702" x2="589" y1="600.3183" y2="600.3183"/><polygon fill="#A80036" points="599,596.3183,589,600.3183,599,604.3183,595,600.3183" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="141.5" x2="141.5" y1="476.9923" y2="511.9742"/><polygon fill="#A80036" points="137.5,501.9742,141.5,511.9742,145.5,501.9742,141.5,505.9742" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="141.5" x2="141.5" y1="564.6624" y2="787.0065"/><polygon fill="#A80036" points="137.5,777.0065,141.5,787.0065,145.5,777.0065,141.5,781.0065" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="577" x2="577" y1="476.9923" y2="511.9742"/><polygon fill="#A80036" points="573,501.9742,577,511.9742,581,501.9742,577,505.9742" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="577" x2="577" y1="612.3183" y2="787.0065"/><polygon fill="#A80036" points="573,777.0065,577,787.0065,581,777.0065,577,781.0065" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="216" x2="498" y1="464.9923" y2="464.9923"/><polygon fill="#A80036" points="488,460.9923,498,464.9923,488,468.9923,492,464.9923" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="599.5" x2="599.5" y1="389.0104" y2="427.9923"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="599.5" x2="141.5" y1="427.9923" y2="427.9923"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="141.5" x2="141.5" y1="427.9923" y2="452.9923"/><polygon fill="#A80036" points="137.5,442.9923,141.5,452.9923,145.5,442.9923,141.5,446.9923" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="656" x2="921.5" y1="464.9923" y2="464.9923"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="921.5" x2="921.5" y1="464.9923" y2="492.7377"/><polygon fill="#A80036" points="917.5,482.7377,921.5,492.7377,925.5,482.7377,921.5,486.7377" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="141.5" x2="599.5" y1="787.0065" y2="787.0065"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="599.5" x2="599.5" y1="831.0065" y2="856.4974"/><polygon fill="#A80036" points="595.5,846.4974,599.5,856.4974,603.5,846.4974,599.5,850.4974" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="684" x2="696" y1="819.0065" y2="819.0065"/><polygon fill="#A80036" points="692,864.6695,696,874.6695,700,864.6695,696,868.6695" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="696" x2="696" y1="819.0065" y2="924.8416"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="696" x2="611.5" y1="924.8416" y2="924.8416"/><polygon fill="#A80036" points="621.5,920.8416,611.5,924.8416,621.5,928.8416,617.5,924.8416" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="599.5" x2="599.5" y1="892.8416" y2="912.8416"/><polygon fill="#A80036" points="595.5,902.8416,599.5,912.8416,603.5,902.8416,599.5,906.8416" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="599.5" x2="599.5" y1="787.0065" y2="807.0065"/><polygon fill="#A80036" points="595.5,797.0065,599.5,807.0065,603.5,797.0065,599.5,801.0065" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="599.5" x2="599.5" y1="936.8416" y2="946.8416"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="599.5" x2="1036.5" y1="946.8416" y2="946.8416"/><polygon fill="#A80036" points="1032.5,703.9903,1036.5,693.9903,1040.5,703.9903,1036.5,699.9903" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1036.5" x2="1036.5" y1="377.0104" y2="946.8416"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1036.5" x2="623.5" y1="377.0104" y2="377.0104"/><polygon fill="#A80036" points="633.5,373.0104,623.5,377.0104,633.5,381.0104,629.5,377.0104" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="575.5" x2="34" y1="377.0104" y2="377.0104"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="34" x2="34" y1="377.0104" y2="413.0104"/><polygon fill="#A80036" points="30,403.0104,34,413.0104,38,403.0104,34,407.0104" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="599.5" x2="599.5" y1="345.0104" y2="365.0104"/><polygon fill="#A80036" points="595.5,355.0104,599.5,365.0104,603.5,355.0104,599.5,359.0104" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1223.5" x2="1223.5" y1="600.426" y2="632.3183"/><polygon fill="#A80036" points="1219.5,622.3183,1223.5,632.3183,1227.5,622.3183,1223.5,626.3183" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1223.5" x2="1223.5" y1="668.6624" y2="688.6624"/><polygon fill="#A80036" points="1219.5,678.6624,1223.5,688.6624,1227.5,678.6624,1223.5,682.6624" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1223.5" x2="1223.5" y1="725.0065" y2="745.0065"/><polygon fill="#A80036" points="1219.5,735.0065,1223.5,745.0065,1227.5,735.0065,1223.5,739.0065" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="921.5" x2="921.5" y1="529.0819" y2="546.5819"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="921.5" x2="1223.5" y1="546.5819" y2="546.5819"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1223.5" x2="1223.5" y1="546.5819" y2="564.0819"/><polygon fill="#A80036" points="1219.5,554.0819,1223.5,564.0819,1227.5,554.0819,1223.5,558.0819" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="91" x="549" y="33.0158">WebServer</text><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="107" x="1158.75" y="33.0158">virtualServer</text><line style="stroke: #000000; stroke-width: 2.0;" x1="10" x2="10" y1="13.774" y2="958.8416"/><line style="stroke: #000000; stroke-width: 2.0;" x1="1045.5" x2="1045.5" y1="13.774" y2="958.8416"/><line style="stroke: #000000; stroke-width: 2.0;" x1="1384" x2="1384" y1="13.774" y2="958.8416"/><!--MD5=[1b1605df8e16cbe55618ceb8bd269267]
@startuml

|WebServer|
start
:read config file & check syntax;
:set up epoll instance;
:setup sockets & add to epoll instance;
:instantiate virtualServers;
:initiate infinite loop with epoll_wait;
while(true) is (iterate through all flagged fds)
	if (fd is one of the sockets?) then (yes)
		:establish connection &\nadd new fd to epoll instance;
	else if (header is not fully parsed) then (yes)
		if (this connection Request is instantiated?) then (yes)
			:continue to parse header;
			note: recv called here
		else
			:instantiate Request object & track it;
		endif
	else
		:dispatch request to virtualServer;
		|virtualServer|
			:parseBody;
			note: recv called here
			:construct response;
			:signal WebServer that response is ready to be sent;
			stop
		|WebServer|
	endif
	if (is there a response be sent?) then (yes)
		:send response;
		note: send called here
	else
	endif
endwhile
end

@enduml

PlantUML version 1.2020.02(Sun Mar 01 07:22:07 BRT 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 17.0.13+11-Debian-2deb12u1
Operating System: Linux
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>